# Maintainer: Helge Sverre <helge.sverre@gmail.com>
# AUR package for jake
# https://aur.archlinux.org/packages/jake

pkgname=jake
pkgver=0.2.0
pkgrel=1
pkgdesc="Modern command runner with Make's dependency tracking and Just's UX"
arch=('x86_64' 'aarch64')
url="https://github.com/HelgeSverre/jake"
license=('MIT')
makedepends=('zig')
source=("${pkgname}-${pkgver}.tar.gz::https://github.com/HelgeSverre/jake/archive/refs/tags/v${pkgver}.tar.gz")
sha256sums=('PLACEHOLDER') # Update with: makepkg -g

build() {
    cd "${pkgname}-${pkgver}"
    zig build -Doptimize=ReleaseSafe --prefix "${srcdir}/install"
}

package() {
    cd "${pkgname}-${pkgver}"
    install -Dm755 "${srcdir}/install/bin/jake" "${pkgdir}/usr/bin/jake"

    # Install license
    install -Dm644 LICENSE "${pkgdir}/usr/share/licenses/${pkgname}/LICENSE" 2>/dev/null || true

    # Install documentation
    install -Dm644 README.md "${pkgdir}/usr/share/doc/${pkgname}/README.md"
}
